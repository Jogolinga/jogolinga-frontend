/* ===============================================
   LANGUAGESELECTOR.CSS - VERSION COMPLÈTE CORRIGÉE
   Thème ocre/terre cuite avec carrousel mobile optimisé
   =============================================== */

/* Variables CSS pour cohérence avec le thème principal */
:root {
  /* Mode Sombre - Ocre/Terre Cuite/Marron */
  --dark-primary: #cd853f;      /* Ocre */
  --dark-secondary: #8b4513;    /* Terre cuite */
  --dark-accent: #654321;       /* Marron foncé */
  --dark-text: #ffffff;         /* Blanc */
  --dark-text-secondary: #f5deb3; /* Beige clair */
  
  /* Mode Clair - Ocre Clair/Sable/Beige */
 --light-primary: #cd853f;     /* Ocre (plus foncé et plus ocre) */
  --light-secondary: #f0d068;   /* Sable doré (plus ocre) */
  --light-accent: #deb887;      /* Beige ocré */
  --light-text: #654321;        /* Marron foncé */
  --light-text-secondary: #8b4513; /* Terre cuite */
}

/* ===============================================
   CONTENEUR PRINCIPAL
   =============================================== */

.language-selector-container {
  position: relative;
  min-width: 160px;
  height: 40px;
  z-index: 50;
}

/* ===============================================
   BOUTON PRINCIPAL - THÈME SOMBRE PAR DÉFAUT
   =============================================== */

.language-selector-button {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 16px;
  /* Mode Sombre par défaut - Dégradé ocre/terre cuite */
  background: linear-gradient(to right, rgba(205, 133, 63, 0.95), rgba(139, 69, 19, 0.95));
  color: #ffffff;
  border: 2px solid rgba(255, 255, 255, 0.4);
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
  font-weight: 600;
  outline: none;
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(10px);
}

/* Effet de brillance subtil */
.language-selector-button::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s ease;
}

.language-selector-button:hover::before {
  left: 100%;
}

.language-selector-button:hover {
  background: linear-gradient(to right, rgba(205, 133, 63, 1), rgba(139, 69, 19, 1));
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.6);
  transform: translateY(-2px);
  border-color: rgba(255, 255, 255, 0.6);
}

.language-selector-button:active {
  transform: translateY(0px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
}

/* ===============================================
   ÉLÉMENTS DU BOUTON
   =============================================== */

.language-flag {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.language-name {
  flex-grow: 1;
  text-align: left;
  font-size: 14px;
  font-weight: 700;
  color: #ffffff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.language-chevron {
  width: 16px;
  height: 16px;
  transition: transform 0.3s ease;
  opacity: 1;
  color: #ffffff;
}

.language-chevron.rotate {
  transform: rotate(180deg);
}

/* ===============================================
   MENU DÉROULANT DESKTOP - THÈME SOMBRE PAR DÉFAUT
   =============================================== */

.language-dropdown:not(.mobile-carousel-dropdown) {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  width: 100%;
  min-width: 160px;
  /* Mode Sombre par défaut */
  background: linear-gradient(135deg, rgba(139, 69, 19, 0.98), rgba(101, 67, 33, 0.98));
  border: 2px solid rgba(255, 255, 255, 0.4);
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.7);
  overflow: hidden;
  z-index: 100;
  animation: fadeInScale 0.3s ease-out;
  backdrop-filter: blur(20px);
}

.language-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

/* ===============================================
   OPTIONS DE LANGUE DESKTOP - THÈME SOMBRE PAR DÉFAUT
   =============================================== */

.language-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  /* Mode Sombre par défaut */
  color: #ffffff;
  background: rgba(255, 255, 255, 0.08);
  border-bottom: 1px solid rgba(255, 255, 255, 0.15);
  position: relative;
  overflow: hidden;
}

.language-option:last-child {
  border-bottom: none;
}

/* Effet de survol avec dégradé */
.language-option::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left 0.3s ease;
}

.language-option:hover::before {
  left: 100%;
}

.language-option:hover {
  background: rgba(255, 255, 255, 0.15);
  color: #ffffff;
  border-bottom-color: rgba(255, 255, 255, 0.25);
  transform: translateX(4px);
}

.language-option.selected {
  background: rgba(255, 255, 255, 0.2);
  border-left: 4px solid #ffffff;
  color: #ffffff;
  border-bottom-color: rgba(255, 255, 255, 0.3);
  padding-left: 12px;
  font-weight: 600;
}

.language-option-flag {
  display: flex;
  align-items: center;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  justify-content: center;
  transition: all 0.3s ease;
}

.language-option:hover .language-option-flag {
  transform: scale(1.1);
  background: rgba(255, 255, 255, 0.2);
}

.language-option-name {
  color: #ffffff;
  font-size: 14px;
  font-weight: 700;
  transition: all 0.3s ease;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
}

/* ===============================================
   DESCRIPTIONS - THÈME SOMBRE PAR DÉFAUT
   =============================================== */

.language-option-description {
  font-size: 11px;
  opacity: 1;
  font-style: italic;
  margin-top: 2px;
  color: rgba(255, 255, 255, 0.85);
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
}

/* ===============================================
   ICÔNE DE VALIDATION - THÈME SOMBRE PAR DÉFAUT
   =============================================== */

.language-option-check {
  font-size: 14px;
  font-weight: 800;
  color: #ffffff;
  background: rgba(205, 133, 63, 0.8);
  padding: 2px 4px;
  border-radius: 50%;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  margin-left: auto;
}

/* ===============================================
   CARROUSEL MOBILE COMPACT - THÈME SOMBRE PAR DÉFAUT
   =============================================== */

/* Dropdown mobile avec carrousel compact */
.mobile-carousel-dropdown {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  width: 90vw !important;
  max-width: 350px !important;
  height: auto !important;
  max-height: 85vh !important;
  border-radius: 16px !important;
  padding: 0 !important;
  overflow: hidden !important;
  background: linear-gradient(135deg, rgba(139, 69, 19, 0.98), rgba(101, 67, 33, 0.98)) !important;
  border: 2px solid rgba(255, 255, 255, 0.5) !important;
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7) !important;
  backdrop-filter: blur(15px) !important;
  z-index: 999999 !important;
}

/* Container principal du carrousel COMPACT */
.mobile-carousel-container {
  padding: 16px !important;
  width: 100% !important;
  max-width: 100% !important;
  box-sizing: border-box !important;
  overflow: hidden !important;
}

/* Indicateurs de position COMPACTS */
.carousel-indicators {
  display: flex !important;
  justify-content: center !important;
  gap: 6px !important;
  margin-bottom: 12px !important;
  padding: 0 !important;
}

.carousel-indicator {
  width: 10px !important;
  height: 10px !important;
  border-radius: 50% !important;
  background-color: rgba(255, 255, 255, 0.4) !important;
  cursor: pointer !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  border: 2px solid transparent !important;
}

.carousel-indicator.active {
  background-color: #ffffff !important;
  border-color: rgba(205, 133, 63, 1) !important;
  transform: scale(1.2) !important;
  box-shadow: 0 0 6px rgba(205, 133, 63, 0.6) !important;
}

/* Wrapper du carrousel COMPACT avec navigation */
.carousel-wrapper {
  position: relative !important;
  width: 100% !important;
  height: 140px !important;
  overflow: hidden !important;
  border-radius: 16px !important;
  background: linear-gradient(135deg, rgba(139, 69, 19, 0.3), rgba(101, 67, 33, 0.3)) !important;
  border: 2px solid rgba(255, 255, 255, 0.3) !important;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5) !important;
  margin-bottom: 12px !important;
}

/* Container du contenu carrousel */
.carousel-content {
  display: flex !important;
  width: 100% !important;
  height: 100% !important;
  will-change: transform !important;
}

/* Item individuel du carrousel COMPACT */
.current-carousel-item {
  flex: 1 !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  text-align: center !important;
  padding: 16px !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  position: relative !important;
  height: 100% !important;
  box-sizing: border-box !important;
  background: rgba(255, 255, 255, 0.1) !important;
  border-radius: 16px !important;
  opacity: 1 !important;
  transform: scale(1) !important;
  pointer-events: auto !important;
  visibility: visible !important;
  z-index: 10 !important;
}

.current-carousel-item.selected {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(205, 133, 63, 0.2)) !important;
  border: 2px solid rgba(255, 255, 255, 0.5) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5) !important;
}

/* Drapeau du carrousel COMPACT */
.current-carousel-item > div:first-child {
  width: 60px !important;
  height: 60px !important;
  border-radius: 50% !important;
  border: 3px solid rgba(255, 255, 255, 0.8) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  margin-bottom: 8px !important;
  font-size: 30px !important;
  background: rgba(255, 255, 255, 0.95) !important;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4) !important;
  transition: all 0.3s ease !important;
}

/* Contenu textuel du carrousel COMPACT - POSITION FIXE EN BAS */
.current-carousel-item > div:nth-child(2) {
  position: absolute !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  text-align: left !important;
  padding: 12px !important;
  box-sizing: border-box !important;
  
  border-radius: 0 0 16px 16px !important;
}

.current-carousel-item h3 {
  position: relative !important;
  font-size: 18px !important;
  font-weight: 900 !important;
  color: #ffffff !important;
  margin: 0 !important;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6) !important;
  line-height: 1.2 !important;
  text-align: left !important;
  max-width: calc(100% - 40px) !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}

/* Icône de validation carrousel COMPACT - REPOSITIONNÉE */
.current-carousel-item > div:nth-child(3) {
  position: absolute !important;
  top: 12px !important;
  right: 12px !important;
  width: 24px !important;
  height: 24px !important;
  background: rgba(255, 255, 255, 0.95) !important;
 
  border-radius: 50% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 14px !important;
  font-weight: bold !important;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4) !important;
  border: 2px solid rgba(205, 133, 63, 0.8) !important;
  z-index: 20 !important;
}

/* Suppression du cercle bleu parasite et autres éléments indésirables */
.current-carousel-item::before,
.current-carousel-item::after,
.carousel-wrapper::before,
.carousel-wrapper::after {
  display: none !important;
  content: none !important;
}

/* Suppression des outlines et focus indésirables */
.current-carousel-item,
.current-carousel-item *,
.carousel-wrapper,
.carousel-wrapper * {
  outline: none !important;
}

.current-carousel-item:focus,
.current-carousel-item *:focus {
  outline: none !important;
}

/* Reset des styles par défaut qui pourraient créer des éléments visuels */
.current-carousel-item input,
.current-carousel-item button,
.current-carousel-item select {
  display: none !important;
}

/* Masquer tous les éléments sauf les 3 principaux */
.current-carousel-item > *:not(:nth-child(1)):not(:nth-child(2)):not(:nth-child(3)) {
  display: none !important;
}

/* Boutons de navigation carrousel COMPACTS */
.carousel-nav-button {
  position: absolute !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  width: 32px !important;
  height: 32px !important;
  background: rgba(139, 69, 19, 0.9) !important;
  border: 2px solid rgba(255, 255, 255, 0.4) !important;
  border-radius: 50% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  color: #ffffff !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  z-index: 10 !important;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4) !important;
}

.carousel-nav-button:hover {
  background: rgba(139, 69, 19, 1) !important;
  border-color: rgba(255, 255, 255, 0.6) !important;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5) !important;
  transform: translateY(-50%) scale(1.05) !important;
}

.carousel-nav-button:active {
  transform: translateY(-50%) scale(0.95) !important;
}

.carousel-prev {
  left: -16px !important;
}

.carousel-next {
  right: -16px !important;
}

/* Actions du carrousel COMPACTES */
.carousel-actions {
  display: flex !important;
  gap: 8px !important;
  justify-content: center !important;
  margin-bottom: 0 !important;
  padding: 0 !important;
}

.carousel-action-button {
  padding: 8px 16px !important;
  border-radius: 20px !important;
  border: 2px solid transparent !important;
  font-size: 13px !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  min-width: 100px !important;
  text-align: center !important;
}

.carousel-select {
  background: linear-gradient(45deg, #cd853f, #8b4513) !important;
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.4) !important;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4) !important;
}

.carousel-select:hover:not(:disabled) {
  background: linear-gradient(45deg, #8b4513, #654321) !important;
  box-shadow: 0 4px 8px rgba(139, 69, 19, 0.5) !important;
  transform: translateY(-1px) !important;
}

.carousel-select:disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
  transform: none !important;
  box-shadow: 0 2px 4px rgba(205, 133, 63, 0.2) !important;
}

.carousel-cancel {
  background: rgba(139, 69, 19, 0.8) !important;
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3) !important;
}

.carousel-cancel:hover {
  background: rgba(139, 69, 19, 1) !important;
  border-color: rgba(255, 255, 255, 0.5) !important;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
  transform: translateY(-1px) !important;
}

/* ===============================================
   ANIMATIONS
   =============================================== */

/* Animation d'apparition améliorée */
@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Animation d'apparition du carrousel */
@keyframes carouselSlideIn {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

.mobile-carousel-dropdown {
  animation: carouselSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* Animation de rotation du chevron */
.language-chevron {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Animation de pulsation pour le bouton sélectionné */
@keyframes selectedPulseDark {
  0%, 100% {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
  }
  50% {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7), 0 0 0 2px rgba(255, 255, 255, 0.3);
  }
}

.language-selector-button.active {
  animation: selectedPulseDark 2s ease-in-out infinite;
}

/* Animation de transition des items */
.carousel-item {
  will-change: transform !important;
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* Animation des indicateurs */
.carousel-indicator {
  will-change: transform, background-color !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* ===============================================
   ÉTATS INTERACTIFS AMÉLIORÉS
   =============================================== */

/* Focus states pour l'accessibilité */
.language-selector-button:focus-visible {
  outline: 2px solid #ffffff;
  outline-offset: 2px;
}

.language-option:focus-visible {
  outline: 2px solid #ffffff;
  outline-offset: -2px;
}

/* Focus pour l'accessibilité carrousel */
.carousel-nav-button:focus-visible,
.carousel-action-button:focus-visible,
.carousel-indicator:focus-visible {
  outline: 2px solid #ffffff !important;
  outline-offset: 2px !important;
}

/* Effet de rebond au clic */
.language-selector-button:active {
  animation: buttonBounce 0.2s ease;
}

@keyframes buttonBounce {
  0% { transform: scale(1); }
  50% { transform: scale(0.98); }
  100% { transform: scale(1); }
}

/* ===============================================
   DESIGN RESPONSIVE - VERSION COMPACTE
   =============================================== */

@media (max-width: 640px) {
  .language-selector-container {
    min-width: 140px;
  }
  
  .language-selector-button {
    padding: 8px 14px;
    font-size: 15px;
    min-height: 44px;
  }
  
  .language-name {
    font-size: 15px !important;
    font-weight: 800 !important;
    text-shadow: 
      0 1px 3px rgba(0, 0, 0, 1),
      0 0 20px rgba(0, 0, 0, 0.9),
      0 3px 8px rgba(0, 0, 0, 0.8) !important;
  }
  
  .language-option {
    padding: 12px 16px;
    min-height: 48px;
  }
  
  .language-option-name {
    font-size: 15px !important;
    font-weight: 800 !important;
    text-shadow: 
      0 1px 3px rgba(0, 0, 0, 1),
      0 0 20px rgba(0, 0, 0, 0.9),
      0 3px 8px rgba(0, 0, 0, 0.8) !important;
  }
  
  .language-option-description {
    font-size: 12px !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.9) !important;
  }
}

@media (max-width: 480px) {
  .language-selector-container {
    min-width: 130px;
  }
  
  .language-selector-button {
    padding: 8px 12px;
    font-size: 14px;
    min-height: 44px;
  }
  
  .language-name {
    font-size: 14px !important;
    font-weight: 900 !important;
    text-shadow: 
      0 2px 4px rgba(0, 0, 0, 1),
      0 0 25px rgba(0, 0, 0, 0.9),
      0 4px 10px rgba(0, 0, 0, 0.8) !important;
  }
  
  .language-flag,
  .language-option-flag {
    width: 22px;
    height: 22px;
  }
  
  .language-chevron {
    width: 16px;
    height: 16px;
  }
  
  .language-option {
    padding: 10px 14px;
    min-height: 48px;
  }
  
  .language-option-name {
    font-size: 14px !important;
    font-weight: 900 !important;
    text-shadow: 
      0 2px 4px rgba(0, 0, 0, 1),
      0 0 25px rgba(0, 0, 0, 0.9),
      0 4px 10px rgba(0, 0, 0, 0.8) !important;
  }
  
  .language-option-description {
    font-size: 11px !important;
    opacity: 1 !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 1) !important;
  }
  
  /* RESPONSIVE CARROUSEL COMPACT */
  .mobile-carousel-container {
    padding: 12px !important;
  }
  
  .carousel-wrapper {
    height: 120px !important;
    border-radius: 14px !important;
  }
  
  .current-carousel-item > div:first-child {
    width: 50px !important;
    height: 50px !important;
    font-size: 25px !important;
  }
  
  .current-carousel-item h3 {
    font-size: 16px !important;
  }
  
  .current-carousel-item > div:nth-child(2) {
    padding: 10px !important;
  }
  
  .carousel-nav-button {
    width: 28px !important;
    height: 28px !important;
  }
  
  .carousel-prev {
    left: -14px !important;
  }
  
  .carousel-next {
    right: -14px !important;
  }
  
  .carousel-action-button {
    padding: 6px 12px !important;
    font-size: 12px !important;
    min-width: 80px !important;
  }
  
  .carousel-indicators {
    gap: 5px !important;
    margin-bottom: 10px !important;
  }
  
  .carousel-indicator {
    width: 8px !important;
    height: 8px !important;
  }
}

@media (max-width: 360px) {
  .mobile-carousel-dropdown {
    width: 95vw !important;
    max-width: none !important;
  }
  
  .mobile-carousel-container {
    padding: 10px !important;
  }
  
  .carousel-wrapper {
    height: 100px !important;
  }
  
  .current-carousel-item > div:first-child {
    width: 45px !important;
    height: 45px !important;
    font-size: 22px !important;
  }
  
  .current-carousel-item h3 {
    font-size: 14px !important;
  }
  
  .current-carousel-item > div:nth-child(2) {
    padding: 8px !important;
  }
  
  .carousel-action-button {
    padding: 5px 10px !important;
    font-size: 11px !important;
    min-width: 70px !important;
  }
}

/* ===============================================
   ADAPTATION HEADER MOBILE - CONTRASTE OPTIMISÉ
   =============================================== */

/* Styles spécifiques pour le header mobile */
.mobile-header .language-selector-container {
  z-index: 100001;
}

.mobile-header .language-selector-button {
  background: rgba(139, 69, 19, 0.9) !important;
  color: #ffffff !important;
  border: 2px solid rgba(255, 255, 255, 0.4) !important;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4) !important;
  backdrop-filter: blur(10px) !important;
}

.mobile-header .language-selector-button:hover {
  background: rgba(139, 69, 19, 1) !important;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5) !important;
  border-color: rgba(255, 255, 255, 0.6) !important;
}

.mobile-header .language-selector-button .language-name,
.mobile-header .language-name {
  color: #ffffff !important;
  text-shadow: 
    0 1px 3px rgba(0, 0, 0, 1),
    0 0 15px rgba(0, 0, 0, 0.8),
    0 2px 6px rgba(0, 0, 0, 0.9) !important;
  font-weight: 800 !important;
}

/* Dropdown dans le header mobile */
.mobile-header .language-dropdown {
  background: rgba(139, 69, 19, 0.98) !important;
  border: 2px solid rgba(255, 255, 255, 0.4) !important;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6) !important;
}

.mobile-header .language-option {
  color: #ffffff !important;
  background: rgba(255, 255, 255, 0.1) !important;
}

.mobile-header .language-option:hover {
  background: rgba(255, 255, 255, 0.2) !important;
}

/* ===============================================
   LAYOUT VERTICAL MOBILE - CONTRASTE OPTIMISÉ
   =============================================== */

@media (max-width: 768px) {
  /* Dropdown optimisé pour layout vertical */
  .language-dropdown:not(.mobile-carousel-dropdown) {
    min-width: 300px !important;
    max-width: 340px !important;
    border-radius: 20px !important;
    padding: 18px 14px !important;
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7) !important;
    backdrop-filter: blur(15px) !important;
    border-width: 2px !important;
    
    /* Position centrée */
    left: 50% !important;
    transform: translateX(-50%) !important;
    top: calc(100% + 12px) !important;
  }
  
  /* Options avec layout VERTICAL (colonne) - seulement pour non-carrousel */
  .language-dropdown:not(.mobile-carousel-dropdown) .language-option {
    padding: 16px 18px !important;
    gap: 12px !important;
    min-height: 80px !important;
    margin-bottom: 8px !important;
    border-radius: 16px !important;
    background: rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
    border: 2px solid transparent !important;
    transition: all 0.3s ease !important;
    cursor: pointer !important;
    
    /* LAYOUT VERTICAL - Colonne centrée */
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    text-align: center !important;
  }
  
  /* Animation d'apparition */
  .language-dropdown:not(.mobile-carousel-dropdown) {
    animation: dropdownSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }
  
  @keyframes dropdownSlideIn {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(-10px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0) scale(1);
    }
  }
}

/* ===============================================
   CORRECTIONS TRÈS PETITS ÉCRANS
   =============================================== */

@media (max-width: 480px) {
  .language-dropdown:not(.mobile-carousel-dropdown) {
    min-width: 280px !important;
    max-width: 320px !important;
    padding: 16px 12px !important;
  }
  
  .language-dropdown:not(.mobile-carousel-dropdown) .language-option {
    padding: 14px 16px !important;
    gap: 10px !important;
    min-height: 75px !important;
  }
  
  .language-dropdown:not(.mobile-carousel-dropdown) .language-option-flag {
    width: 40px !important;
    height: 40px !important;
    font-size: 24px !important;
    border-width: 2px !important;
  }
  
  .language-dropdown:not(.mobile-carousel-dropdown) .language-option-name {
    font-size: 15px !important;
  }
  
  .language-dropdown:not(.mobile-carousel-dropdown) .language-option-check {
    width: 22px !important;
    height: 22px !important;
    font-size: 16px !important;
    top: 6px !important;
    right: 6px !important;
  }
}

/* ===============================================
   CORRECTIONS HEADER MOBILE - CONTRASTE FINAL
   =============================================== */

@media (max-width: 768px) {
  /* Header mobile - dropdown positionné correctement */
  .mobile-header .language-dropdown {
    z-index: 100010 !important;
    position: fixed !important;
    max-width: calc(100vw - 40px) !important;
    left: 20px !important;
    right: 20px !important;
    transform: none !important;
    top: 70px !important;
  }
  
  /* Bouton dans header mobile - contraste optimisé */
  .mobile-header .language-selector-button {
    min-width: 140px !important;
    height: 44px !important;
    padding: 8px 14px !important;
    gap: 10px !important;
    font-size: 15px !important;
    border-radius: 22px !important;
  }
  
  .mobile-header .language-flag {
    width: 28px !important;
    height: 28px !important;
    border-width: 2px !important;
    font-size: 16px !important;
  }
  
  .mobile-header .language-name {
    font-size: 15px !important;
    font-weight: 700 !important;
  }
  
  .mobile-header .language-name,
  .mobile-header .language-selector-button .language-name {
    color: #ffffff !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6) !important;
    font-weight: 900 !important;
  }
  
  .mobile-header .language-chevron {
    width: 16px !important;
    height: 16px !important;
    color: #ffffff !important;
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.5)) !important;
  }
}

/* ===============================================
   CONTRASTE ÉLEVÉ POUR ACCESSIBILITÉ
   =============================================== */

@media (prefers-contrast: high) {
  .language-selector-button {
    border-width: 3px !important;
    font-weight: 700 !important;
    border-color: rgba(255, 255, 255, 0.8) !important;
  }
  
  .language-dropdown {
    border-width: 3px !important;
    border-color: rgba(255, 255, 255, 0.8) !important;
  }
  
  .language-option {
    font-weight: 700 !important;
  }
  
  .language-option.selected {
    border-left-width: 6px !important;
    border-left-color: #ffffff !important;
    font-weight: 900 !important;
  }
  
  /* Contraste maximum pour les noms */
  .language-name,
  .language-option-name {
    color: #ffffff !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8) !important;
    font-weight: 900 !important;
  }
  
  /* Contraste élevé carrousel */
  .current-carousel-item h3 {
    font-weight: 900 !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7) !important;
  }
  
  .carousel-nav-button {
    border-width: 3px !important;
  }
  
  .carousel-action-button {
    border-width: 3px !important;
  }
}

/* ===============================================
   RÉDUCTION DES ANIMATIONS SI DEMANDÉE
   =============================================== */

@media (prefers-reduced-motion: reduce) {
  .language-selector-button,
  .language-option,
  .language-chevron,
  .language-option-flag {
    transition: none !important;
    animation: none !important;
  }
  
  .language-dropdown {
    animation: none !important;
  }
  
  .language-selector-button:hover {
    transform: none !important;
  }
  
  .language-option:hover {
    transform: none !important;
  }
  
  /* Réduction des animations carrousel */
  .carousel-content {
    transition: none !important;
  }
  
  .carousel-item,
  .carousel-indicator,
  .carousel-nav-button,
  .carousel-action-button {
    transition: none !important;
  }
  
  .mobile-carousel-dropdown {
    animation: none !important;
  }
  
  .carousel-nav-button:hover {
    transform: translateY(-50%) !important;
  }
  
  @media (max-width: 768px) {
    .language-option:hover {
      transform: none !important;
    }
  }
}

/* ===============================================
   ÉTAT DISABLED POUR ANIMATION - CONTRASTE MAINTENU
   =============================================== */

.language-selector-button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.language-selector-button:disabled:hover {
  transform: none;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5) !important;
}

/* ===============================================
   UTILITAIRES ET OVERLAYS
   =============================================== */

/* Overlay pour mobile */
.dropdown-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  z-index: 100005;
  backdrop-filter: blur(4px);
  cursor: pointer;
}

/* Force l'affichage correct du carrousel */
.mobile-carousel-dropdown {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 999999 !important;
}

.mobile-carousel-container {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Cache les éléments non utilisés dans le carrousel */
.mobile-carousel-dropdown .language-list {
  display: none !important;
}

.language-dropdown:not(.mobile-carousel-dropdown) .mobile-carousel-container {
  display: none !important;
}

/* ===============================================
   MODE CLAIR - VERSION CORRIGÉE (SEULEMENT EN MODE CLAIR)
   =============================================== */

/* Sélecteur de langue - Mode Clair SEULEMENT */
body.light .language-selector-button,
html.light .language-selector-button {
  background: linear-gradient(to right, var(--light-primary), var(--light-secondary)) !important;
  color: var(--light-text) !important;
  border: 2px solid rgba(139, 69, 19, 0.3) !important;
  box-shadow: 0 4px 8px rgba(218, 165, 32, 0.3) !important;
  backdrop-filter: blur(10px) !important;
}

body.light .language-selector-button:hover,
html.light .language-selector-button:hover {
  box-shadow: 0 6px 12px rgba(218, 165, 32, 0.4) !important;
  border-color: rgba(139, 69, 19, 0.5) !important;
  background: linear-gradient(to right, var(--light-primary), var(--light-secondary)) !important;
}

/* Texte en mode clair SEULEMENT - GARDE LE TEXTE BLANC */
body.light .language-name,
html.light .language-name,
body.light .language-selector-button .language-name,
html.light .language-selector-button .language-name {
  color: #ffffff !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6) !important;
  font-weight: 700 !important;
}

/* Chevron en mode clair SEULEMENT - GARDE LA COULEUR BLANCHE */
body.light .language-chevron,
html.light .language-chevron {
  color: #ffffff !important;
  opacity: 1 !important;
  filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.5)) !important;
}

/* Dropdown en mode clair SEULEMENT */
body.light .language-dropdown,
html.light .language-dropdown {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(245, 222, 179, 0.95)) !important;
  border: 2px solid rgba(218, 165, 32, 0.4) !important;
  box-shadow: 0 8px 20px rgba(218, 165, 32, 0.3) !important;
  backdrop-filter: blur(15px) !important;
}

/* Options en mode clair SEULEMENT - GARDE LE TEXTE BLANC */
body.light .language-option,
html.light .language-option {
  color: #ffffff !important;
  background: rgba(255, 255, 255, 0.08) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.15) !important;
}

body.light .language-option:hover,
html.light .language-option:hover {
  background: rgba(255, 255, 255, 0.15) !important;
  color: #ffffff !important;
  border-bottom-color: rgba(255, 255, 255, 0.25) !important;
}

body.light .language-option.selected,
html.light .language-option.selected {
  background: rgba(255, 255, 255, 0.2) !important;
  border-left: 4px solid #ffffff !important;
  color: #ffffff !important;
  border-bottom-color: rgba(255, 255, 255, 0.3) !important;
}

/* Noms des options en mode clair SEULEMENT - GARDE LE TEXTE BLANC */
body.light .language-option-name,
html.light .language-option-name {
  color: #ffffff !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
}

/* Descriptions en mode clair SEULEMENT - GARDE LE TEXTE BLANC */
body.light .language-option-description,
html.light .language-option-description {
  color: rgba(255, 255, 255, 0.85) !important;
  opacity: 1 !important;
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5) !important;
}

/* Validation en mode clair SEULEMENT - GARDE LE STYLE SOMBRE */
body.light .language-option-check,
html.light .language-option-check {
  color: #ffffff !important;
  background: rgba(205, 133, 63, 0.8) !important;
  padding: 2px 4px !important;
  border-radius: 50% !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8) !important;
  font-weight: 800 !important;
}

/* Carrousel mobile en mode clair SEULEMENT */
body.light .mobile-carousel-dropdown,
html.light .mobile-carousel-dropdown {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(245, 222, 179, 0.98)) !important;
  border: 2px solid rgba(218, 165, 32, 0.6) !important;
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3) !important;
}

/* Wrapper carrousel en mode clair SEULEMENT */
body.light .carousel-wrapper,
html.light .carousel-wrapper {
  background: linear-gradient(135deg, rgba(218, 165, 32, 0.1), rgba(245, 222, 179, 0.1)) !important;
  border: 2px solid rgba(218, 165, 32, 0.3) !important;
  box-shadow: 0 6px 15px rgba(218, 165, 32, 0.2) !important;
}

/* Indicateurs carrousel en mode clair SEULEMENT - GARDE LE STYLE SOMBRE */
body.light .carousel-indicator,
html.light .carousel-indicator {
  background-color: rgba(255, 255, 255, 0.4) !important;
}

body.light .carousel-indicator.active,
html.light .carousel-indicator.active {
  background-color: #ffffff !important;
  border-color: rgba(205, 133, 63, 1) !important;
  box-shadow: 0 0 6px rgba(205, 133, 63, 0.6) !important;
}

/* Boutons navigation carrousel en mode clair SEULEMENT - GARDE LE STYLE SOMBRE */
body.light .carousel-nav-button,
html.light .carousel-nav-button {
  background: rgba(139, 69, 19, 0.9) !important;
  border: 2px solid rgba(255, 255, 255, 0.4) !important;
  color: #ffffff !important;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4) !important;
}

body.light .carousel-nav-button:hover,
html.light .carousel-nav-button:hover {
  background: rgba(139, 69, 19, 1) !important;
  border-color: rgba(255, 255, 255, 0.6) !important;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5) !important;
}

/* Actions carrousel en mode clair SEULEMENT - GARDE LE STYLE SOMBRE */
body.light .carousel-select,
html.light .carousel-select {
  background: linear-gradient(45deg, #cd853f, #8b4513) !important;
  border-color: rgba(255, 255, 255, 0.4) !important;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4) !important;
  color: #ffffff !important;
}

body.light .carousel-cancel,
html.light .carousel-cancel {
  background: rgba(139, 69, 19, 0.8) !important;
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3) !important;
}

body.light .carousel-cancel:hover,
html.light .carousel-cancel:hover {
  background: rgba(139, 69, 19, 1) !important;
  border-color: rgba(255, 255, 255, 0.5) !important;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
}

/* Icône de validation carrousel en mode clair SEULEMENT - GARDE LE STYLE SOMBRE */
body.light .current-carousel-item > div:nth-child(3),
html.light .current-carousel-item > div:nth-child(3) {
  background: rgba(255, 255, 255, 0.95) !important;
  color: #8b4513 !important;
  border: 2px solid rgba(205, 133, 63, 0.8) !important;
  text-shadow: none !important;
}



/* ===============================================
   SURCHARGE GLOBALE FINALE - FORCE MAXIMALE
   =============================================== */

/* Tous les textes dans le sélecteur de langue en mode sombre */
:not(.light) .language-selector-container *,
body:not(.light) .language-selector-container *,
html:not(.light) .language-selector-container * {
  color: #ffffff !important;
}

/* Éléments spécifiques avec contraste maximum */
:not(.light) .language-selector-container .language-name,
:not(.light) .language-selector-container .language-option-name,
body:not(.light) .language-selector-container .language-name,
body:not(.light) .language-selector-container .language-option-name,
html:not(.light) .language-selector-container .language-name,
html:not(.light) .language-selector-container .language-option-name {
  color: #ffffff !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
  font-weight: 700 !important;
}

/* Classe force-visible-text pour cas extrêmes */
.force-visible-text,
:not(.light) .force-visible-text,
body:not(.light) .force-visible-text,
html:not(.light) .force-visible-text {
  color: #ffffff !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6) !important;
  font-weight: 700 !important;
}

/* ===============================================
   OPTIMISATIONS PERFORMANCES
   =============================================== */

/* Amélioration des performances pour les transitions */
.carousel-nav-button,
.carousel-action-button,
.current-carousel-item,
.carousel-indicator {
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

/* GPU acceleration pour les animations fluides */
.mobile-carousel-dropdown,
.carousel-wrapper,
.current-carousel-item {
  transform: translateZ(0);
  will-change: transform;
}

/* Optimisation du rendu */
.carousel-content {
  contain: layout style paint;
}

/* ===============================================
   FALLBACKS ET COMPATIBILITÉ
   =============================================== */

/* Fallback si backdrop-filter n'est pas supporté */
@supports not (backdrop-filter: blur(15px)) {
  .mobile-carousel-dropdown {
    background: linear-gradient(135deg, rgba(139, 69, 19, 1), rgba(101, 67, 33, 1)) !important;
  }
  
  body.light .mobile-carousel-dropdown,
  html.light .mobile-carousel-dropdown {
    background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(245, 222, 179, 1)) !important;
  }
  
  .language-dropdown:not(.mobile-carousel-dropdown) {
    background: linear-gradient(135deg, rgba(139, 69, 19, 1), rgba(101, 67, 33, 1)) !important;
  }
  
  body.light .language-dropdown:not(.mobile-carousel-dropdown),
  html.light .language-dropdown:not(.mobile-carousel-dropdown) {
    background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(245, 222, 179, 1)) !important;
  }
}

/* Fallback pour les transformations 3D */
@supports not (transform: translateZ(0)) {
  .carousel-nav-button,
  .carousel-action-button,
  .current-carousel-item {
    transform: none;
  }
}

/* ===============================================
   VARIABLES D'ENVIRONNEMENT POUR MOBILES
   =============================================== */

/* Support pour les écrans avec encoche */
@supports (padding: max(0px)) {
  .mobile-carousel-dropdown {
    padding-top: max(16px, env(safe-area-inset-top));
    padding-bottom: max(16px, env(safe-area-inset-bottom));
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
  }
}

/* Force le z-index pour le carrousel */
.mobile-carousel-dropdown {
  z-index: 999999 !important;
}

.dropdown-overlay {
  z-index: 999998 !important;
}


/* MODE SOMBRE - Check noir */
:not(.light) .current-carousel-item > div:nth-child(3),
body:not(.light) .current-carousel-item > div:nth-child(3),
html:not(.light) .current-carousel-item > div:nth-child(3) {
  color: #000000 !important;
  font-weight: 900 !important;
}

/* MODE CLAIR - Check terre cuite */
body.light .current-carousel-item > div:nth-child(3),
html.light .current-carousel-item > div:nth-child(3) {
  color: #8b4513 !important;
  font-weight: 900 !important;
}

/* ===============================================
   FIN DU FICHIER CSS COMPLET CORRIGÉ
   =============================================== */